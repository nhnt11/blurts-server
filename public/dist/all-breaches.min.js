"use strict";function replaceLogo(a){return a.target.src="/img/logos/missing-logo-icon.png",a.target.removeEventListener("error",replaceLogo),!0}function breachImages(){this.active=!1,this.lazyLoad=()=>{const a=[].slice.call(document.querySelectorAll(".lazy-img"));if(!this.active){this.active=!0;const b=window.innerHeight;a.forEach(c=>{c.getBoundingClientRect().top<=b&&0<=c.getBoundingClientRect().bottom&&(c.classList.add("lazy-loaded"),c.classList.remove("lazy-img"),c.src=c.dataset.src,c.addEventListener("error",replaceLogo),0===a.length&&(document.removeEventListener("scroll",this.lazyLoad),window.removeEventListener("resize",this.lazyLoad),window.removeEventListener("orientationchange",this.lazyLoad)))}),this.active=!1}}}const makeBreachInfoSpans=(a,b,c)=>{const d=document.createElement("span");return d.classList=a,d.textContent=b,c.appendChild(d),d};function makeDiv(a,b){const c=document.createElement("div");return c.classList=a,b.appendChild(c),c}function clearBreaches(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function makeBreaches(a,b,c,d){c.classList.toggle("hide-breaches"),clearBreaches(c);const e=document.createDocumentFragment();e.id="all-breaches";const f=document.body.dataset.logosOrigin;for(const g of a){const a=document.createElement("a");a.classList="breach-card three-up ab drop-shadow send-ga-ping",a.href=`/breach-details/${g.Name}`,a.dataset.eventCategory="All Breaches: More about this breach",a.dataset.eventAction="Click",a.dataset.eventLabel=g.Title,e.appendChild(a);const c=makeDiv("breach-logo-wrapper",a),d=document.createElement("img");d.alt="",d.classList="breach-logo lazy-img",d.dataset.src=`${f}/img/logos/${g.LogoPath}`,d.src="/img/logos/lazyPlaceHolder.png",c.appendChild(d);const h=makeDiv("breach-info-wrapper flx flx-col",a);let i=makeDiv("flx flx-col",h);makeBreachInfoSpans("breach-title",g.Title,i),makeBreachInfoSpans("breach-key",b.BreachAdded,i),makeBreachInfoSpans("breach-value",g.AddedDate,i),makeBreachInfoSpans("breach-key",b.CompromisedData,i),makeBreachInfoSpans("breach-value",g.DataClasses,i),i=makeDiv("breach-card-link-wrap",h),makeBreachInfoSpans("blue-link more-about-this-breach",b.MoreInfoLink,i)}c.appendChild(e),c.classList.toggle("hide-breaches"),d.lazyLoad();const g=document.getElementById("breaches-loader");return g.classList=["hide"],a}function initBreaches(){const a=document.querySelector("#all-breaches");if(a){const b=document.getElementById("breach-array-json"),{LocalizedBreachCardStrings:c,breaches:d}=JSON.parse(b.dataset.breachArray),e=new breachImages;document.addEventListener("scroll",e.lazyLoad),window.addEventListener("resize",e.lazyLoad),window.addEventListener("orientationchange",e.lazyLoad);const f=b=>{makeBreaches(b,c,a,e)},g=d.slice(0,15);f(g);const h=document.getElementById("no-results-blurb"),i=document.getElementById("fuzzy-find-input"),j=document.getElementById("fuzzy-form"),[k,l]=document.querySelectorAll(".show-all-breaches");l.addEventListener("click",a=>{sendPing(a.target,"Click","All Breaches Page"),f(d),l.classList.add("hide")}),k.addEventListener("click",a=>{a.preventDefault(),i.value="",f(d),h.classList=[""],k.classList=["fuzzy-find-show-breaches"]});const m=a=>{a.preventDefault(),a.stopImmediatePropagation(),l.classList=["hide"],k.classList=["fuzzy-find-show-breaches show"];const b=i.value.toLowerCase(),c=d.filter(a=>a.Title.toLowerCase().startsWith(b));return 13===a.keyCode&&h.classList.contains("show")?(f(d),h.classList.remove("show"),k.classList.remove("show"),i.value="",!1):(0===c.length?h.classList.add("show"):h.classList=[""],f(c),!1)};j.addEventListener("keydown",()=>{const a=j.querySelector("input[type=text]");""===a.value&&sendPing(j,"Engage","All Breaches Page")}),j.addEventListener("keyup",m),j.addEventListener("submit",m)}}document.onreadystatechange=()=>{"interactive"===document.readyState&&initBreaches()};