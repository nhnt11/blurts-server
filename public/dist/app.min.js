"use strict";function _dntEnabled(a,b){var c=a||navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,d=b||navigator.userAgent,e=d.match(/Firefox\/(\d+)/),f=/MSIE|Trident/i.test(d),g=d.match(/Windows.+?(?=;)/g);return!(f&&"function"!=typeof Array.prototype.indexOf)&&(c=e&&32>parseInt(e[1],10)?"Unspecified":f&&g&&-1!==["Windows NT 6.1","Windows NT 6.2","Windows NT 6.3"].indexOf(g.toString())?"Unspecified":{0:"Disabled",1:"Enabled"}[c]||"Unspecified","Enabled"===c)}async function sendForm(a,b={}){const c=await fetch(`/user/${a}`,{headers:{"Content-Type":"application/json; charset=utf-8"},mode:"same-origin",method:"POST",body:JSON.stringify(b)});return c.redirected?void(window.location=c.url):await c.json()}async function sendCommunicationOption(a){const{formAction:b,commOption:c,csrfToken:d}=a.target.dataset;sendForm(b,{communicationOption:c,_csrf:d}).then(()=>{}).catch(()=>{})}async function resendEmail(a){const b=a.target,{formAction:c,csrfToken:d,emailId:e}=b.dataset;b.classList.add("email-sent"),await sendForm(c,{_csrf:d,emailId:e}).then(()=>{setTimeout(()=>{const a=b.nextElementSibling;a.classList.remove("hide")},1e3)}).catch(()=>{})}function hideShowOverflowBreaches(a,b){[a,b].forEach(a=>{["show","hide"].forEach(b=>{a.classList.toggle(b)})})}function showRemainingBreaches(a){const b=a.target,c=findAncestor(a.target,"email-card"),d=c.querySelector(".show-additional-breaches");hideShowOverflowBreaches(b,d)}if(document.querySelector(".email-card")){document.querySelectorAll(".show-remaining-breaches").forEach(a=>{a.addEventListener("click",showRemainingBreaches)}),document.querySelectorAll(".toggle-resolved-breaches").forEach(a=>{a.addEventListener("click",()=>{const b=findAncestor(a,"email-card");b.classList.toggle("show-resolved-breach-cards");const c=b.querySelector(".show-remaining-breaches");if(c&&!c.classList.contains("hide")){const a=b.querySelector(".show-additional-breaches");hideShowOverflowBreaches(c,a)}})});const a=document.querySelectorAll(".resend-email");a.forEach(a=>{a.addEventListener("click",resendEmail)});const b=document.querySelectorAll(".radio-comm-option");b.forEach(a=>{a.addEventListener("click",sendCommunicationOption)})}const removeMonitorButton=document.querySelector(".remove-fxm");removeMonitorButton&&removeMonitorButton.addEventListener("click",async a=>{const{formAction:b,csrfToken:c,primaryToken:d,primaryHash:e}=a.target.dataset;await sendForm(b,{_csrf:c,primaryToken:d,primaryHash:e})}),"use strict";function getFxAppLinkInfo(a,b){return[[a.fxMonitor,"https://monitor.firefox.com/","fx-monitor"],[a.pocket,"https://app.adjust.com/hr2n0yz?engagement_type=fallback_click&fallback=https%3A%2F%2Fgetpocket.com%2Ffirefox_learnmore%3Fsrc%3Dff_bento&fallback_lp=https%3A%2F%2Fapps.apple.com%2Fapp%2Fpocket-save-read-grow%2Fid309601447","pocket"],[a.fxDesktop,`https://www.mozilla.org/firefox/new/?utm_source=${b}&utm_medium=referral&utm_campaign=bento&utm_content=desktop`,"fx-desktop"],[a.fxMobile,`http://mozilla.org/firefox/mobile?utm_source=${b}&utm_medium=referral&utm_campaign=bento&utm_content=desktop`,"fx-mobile"],[a.mozVPN,`https://vpn.mozilla.org/?utm_source=${b}&utm_medium=referral&utm_campaign=bento&utm_content=desktop`,"moz-vpn"]]}function createAndAppendEl(a,b,c=null){const d=document.createElement(b);return c&&d.setAttribute("class",c),a.appendChild(d),d}async function getlocalizedBentoStrings(){let a;try{const b=document.body.dataset.serverUrl,c=await fetch(`${b}/getBentoStrings`,{mode:"cors"});a=await c.json()}catch(b){a={bentoButtonTitle:"Firefox apps and services",bentoHeadline:"Firefox is tech that fights for your online privacy.",bentoBottomLink:"Made by Mozilla",mobileCloseBentoButtonTitle:"Close menu",fxDesktop:"Firefox Browser for Desktop",fxMobile:"Firefox Browser for Mobile",fxMonitor:"Firefox Monitor",pocket:"Pocket",mozVPN:"Mozilla VPN"}}return a}class FirefoxApps extends HTMLElement{constructor(){super()}async connectedCallback(){this._currentSite=document.body.dataset.bentoAppId,this._localizedBentoStrings=await getlocalizedBentoStrings(),this._active=!1,this._frag=document.createDocumentFragment(),this._bentoButton=createAndAppendEl(this._frag,"button","fx-bento-button toggle-bento"),this.addTitleAndAriaLabel(this._bentoButton,this._localizedBentoStrings.bentoButtonTitle),this._bentoWrapper=document.createElement("div"),this._bentoWrapper.classList="fx-bento-content-wrapper";const a=window.navigator.language;a.includes("en")||this._bentoWrapper.classList.add("fx-bento-hide-vpn"),this._bentoHideOverflow=createAndAppendEl(this._bentoWrapper,"div","fx-bento-hide-overflow"),this._bentoContent=createAndAppendEl(this._bentoHideOverflow,"div","fx-bento-content"),this._mobileCloseBentoButton=createAndAppendEl(this._bentoContent,"button","fx-bento-mobile-close toggle-bento"),this.addTitleAndAriaLabel(this._mobileCloseBentoButton,this._localizedBentoStrings.mobileCloseBentoButtonTitle),[this._bentoButton,this._mobileCloseBentoButton].forEach(a=>{a.addEventListener("click",this)}),this._logoHeadlineWrapper=createAndAppendEl(this._bentoContent,"div","fx-bento-headline-logo-wrapper"),this._firefoxLogo=createAndAppendEl(this._logoHeadlineWrapper,"div","fx-bento-logo"),this._messageTop=createAndAppendEl(this._logoHeadlineWrapper,"span","fx-bento-headline"),this._messageTop.textContent=this._localizedBentoStrings.bentoHeadline,this._appList=this.makeAppList(),this._messageBottomLink=createAndAppendEl(this._bentoContent,"a","fx-bento-bottom-link fx-bento-link"),this._messageBottomLink.textContent=this._localizedBentoStrings.bentoBottomLink,this._messageBottomLink.href="https://www.mozilla.org/",this._bentoContent.querySelectorAll("a").forEach((a,b)=>{a.dataset.bentoLinkOrder=b,a.addEventListener("click",this),a.tabIndex="-1"}),this._frag.appendChild(this._bentoWrapper),this.appendChild(this._frag),this.addEventListener("close-bento-menu",this)}addTitleAndAriaLabel(a,b){["title","aria-label"].forEach(c=>{a.setAttribute(c,b)})}metricsSendEvent(a,b){if("undefined"!=typeof ga)return ga("send","event","bento",a,b)}handleEvent(a){const b=()=>(this.handleBentoFocusTrap(),window.removeEventListener("resize",this.handleBentoHeight),window.removeEventListener("click",this),document.removeEventListener("keydown",this),this.metricsSendEvent("bento-closed",this._currentSite),this.classList.remove("fx-bento-open"),this._bentoWrapper.classList.add("fx-bento-fade-out"),void setTimeout(()=>{this._bentoWrapper.classList.remove("fx-bento-fade-out"),this._bentoButton.blur(),this.classList=[]},500)),c="keydown"===a.type,d=a.target;if(!c&&["fx-bento-content active","fx-bento-headline","fx-bento-logo","fx-bento-headline-logo-wrapper"].includes(d.className)||c&&![27,40,38].includes(a.keyCode))return;if(null===((a,b)=>{for(;a.parentElement;)if(a=a.parentElement,a.tagName===b)return a;return null})(a.target,"FIREFOX-APPS"))return this._active=!this._active,b();if(a.preventDefault(),a.stopPropagation(),c){const c=a=>{const b=document.activeElement,c=this._bentoContent.querySelectorAll("a");if(!b.dataset.bentoLinkOrder)return void c[0].focus();const d=parseInt(b.dataset.bentoLinkOrder),e=parseInt(d+a);c[e]&&c[e].focus()};switch(a.keyCode){case 27:return this._active=!this._active,void b();case 40:c(1);break;case 38:c(-1);}return}this._active=!this._active;const e=a.target.classList,f=e.contains("fx-bento-bottom-link");if(e.contains("fx-bento-app-link")||f){const a=new URL(d.href);if(a.searchParams.append("utm_source",this._currentSite),a.searchParams.append("utm_medium","referral"),a.searchParams.append("utm_campaign","bento"),f)return this.metricsSendEvent("bento-app-link-click","Mozilla"),window.open(a,"_blank","noopener"),b();const c=d.dataset.bentoAppLinkId;return(this.metricsSendEvent("bento-app-link-click",c),e.contains("fx-bento-current-site"))?(window.location=a,b()):(window.open(a,"_blank","noopener"),b())}if(!this._active)return b();const g=new Event("bento-was-opened");return document.dispatchEvent(g),this.metricsSendEvent("bento-opened",this._currentSite),this.handleBentoHeight(),document.addEventListener("keydown",this),window.addEventListener("resize",this.handleBentoHeight),window.addEventListener("click",this),this.classList=["active fx-bento-open"],this._bentoButton.focus(),this.handleBentoFocusTrap()}handleBentoHeight(){const a=document.querySelector(".fx-bento-content"),b=window.innerHeight,c=b-a.offsetTop-100,d=500>b&&500<window.innerWidth;a.style.maxHeight=d?`${c}px`:"1000px",a.classList.toggle("fx-bento-enable-scrolling",d)}handleBentoFocusTrap(){const a=document.querySelectorAll("a:not(.fx-bento-app-link):not(.fx-bento-bottom-link), button:not(.toggle-bento ), input, select, option, [tabindex]"),b=this._bentoContent.querySelectorAll(".fx-bento-app-link, .fx-bento-bottom-link");return this._active?(a.forEach(a=>{-1<a.tabIndex&&(a.dataset.oldTabIndex=a.tabIndex),a.tabIndex=-1}),void b.forEach(a=>{a.tabIndex=0})):void(a.forEach(a=>a.dataset.oldTabIndex?(a.tabIndex=a.dataset.oldTabIndex,void delete a.dataset.oldTabIndex):void(a.tabIndex=0)),b.forEach(a=>{a.tabIndex=-1}))}makeAppList(){const a=getFxAppLinkInfo(this._localizedBentoStrings,this._currentSite);a.forEach(a=>{const b=document.createElement("a"),c=createAndAppendEl(b,"span",`fx-bento-app-link-span ${a[2]}`);b.setAttribute("class",`fx-bento-app-link fx-bento-link ${a[2]}`),c.textContent=a[0],["href","data-bento-app-link-id"].forEach((c,d)=>{b.setAttribute(c,a[d+1])}),b.dataset.bentoAppLinkId===this._currentSite&&b.classList.add("fx-bento-current-site"),this._bentoContent.appendChild(b)})}}"undefined"==typeof customElements?document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("hide-bento")}):customElements.define("firefox-apps",FirefoxApps),"use strict";const hasParent=(a,b)=>{for(;a.parentNode;)if(a=a.parentNode,a.dataset&&a.dataset.analyticsId===b)return a;return null};function getLocation(){const a=document.querySelectorAll("[data-page-label]");return 0<a.length?`Page ID: ${a[0].dataset.pageLabel}`:"Page ID: Undefined Page"}async function sendPing(a,b,c=null,d=null){if("undefined"!=typeof ga&&!a.classList.contains("hide")){c||(c=`${getLocation()}`);const e=`[v2] ${a.dataset.eventCategory}`;return ga("send","event",e,b,c,d)}}function appendFxaParams(a,b){return getUTMNames().forEach(c=>{b[c]&&!a.searchParams.get(c)&&a.searchParams.append(c,encodeURIComponent(b[c]))}),a}function getFxaUtms(a){return sessionStorage&&(a=appendFxaParams(a,sessionStorage)),appendFxaParams(a,document.body.dataset)}function saveReferringPageData(a){if(sessionStorage)return void getUTMNames().forEach(b=>{a.get(b)&&(sessionStorage[b]=a.get(b))})}function getUTMNames(){return["utm_source","utm_medium","utm_campaign","utm_term","utm_content"]}function sendRecommendationPings(a){document.querySelectorAll(a).forEach(a=>{const b=a.dataset.eventLabel;ga("send","event","Breach Detail: Recommendation CTA","View",b,{nonInteraction:!0}),a.addEventListener("click",()=>{ga("send","event","Breach Detail: Recommendation CTA","Engage",b,{transport:"beacon"})})})}function setMetricsIds(a){a.dataset.entrypoint&&hasParent(a,"sign-up-banner")&&(a.dataset.eventCategory=`${a.dataset.eventCategory} - Banner`,a.dataset.entrypoint=`${a.dataset.entrypoint}-banner`)}function setGAListeners(){if(sendRecommendationPings(".first-four-recs"),document.querySelectorAll(".send-ga-ping, [data-send-ga-ping]").forEach(a=>{a.addEventListener("click",a=>{const b=a.target.dataset.eventCategory,c=a.target.dataset.eventAction,d=a.target.dataset.eventLabel;ga("send","event",b,c,d,{transport:"beacon"})})}),document.querySelectorAll("#scan-user-email, .open-oauth").forEach(a=>{setMetricsIds(a)}),document.querySelectorAll(".open-oauth").forEach(async a=>{const b=new URL("/metrics-flow?",document.body.dataset.fxaAddress);try{const c=await fetch(b,{credentials:"omit"});if(b.searchParams.append("entrypoint",encodeURIComponent(a.dataset.entrypoint)),c&&200===c.status){const{flowId:b,flowBeginTime:d}=await c.json();a.dataset.flowId=b,a.dataset.flowBeginTime=d}}catch(a){}}),"undefined"!=typeof ga){const a=getLocation();if("Scan Results"===a){const b=document.querySelectorAll(".breach-card");ga("send","event","[v2] Breach Count","Returned Breaches",`${a}`,b.length)}document.querySelectorAll(["#scan-user-email","#add-another-email-form",".open-oauth:not(.product-promo-wrapper)","#vpnPromoCloseButton"]).forEach(b=>{sendPing(b,"View",a,{nonInteraction:!0}),["BUTTON","A"].includes(b.tagName)&&b.addEventListener("click",async()=>{await sendPing(b,"Engage",a,{transport:"beacon"})})}),document.querySelectorAll("[data-ga-link]").forEach(a=>{a.addEventListener("click",async b=>{const c=`Link ID: ${b.target.dataset.eventLabel}`;await sendPing(a,"Click",`${c}`)})})}window.sessionStorage.setItem("gaInit",!0)}function isGoogleAnalyticsAvailable(){return"undefined"!=typeof ga}function setSurveyedCookie(){const a=new Date;a.setTime(a.getTime()+2592000000),document.cookie="surveyed=true; expires="+a.toUTCString();const b=document.getElementById("micro-survey-banner");b&&b.remove()}function analyticsSurveyLogic(){if(!isGoogleAnalyticsAvailable)return;const a=document.getElementById("micro-survey-banner");if(!a)return;const b=document.cookie.split("; ").some(a=>a.trim().startsWith("surveyed="));if(b)return void a.remove();a.classList.remove("hidden");const c=document.getElementById("micro-survey-prompt"),d=c.dataset.surveyType,e=document.getElementById("micro-survey-options");switch(d){case"nps":{const b=document.createElement("li");b.textContent=a.getAttribute("data-micro-survey-not-likely-response-translated"),b.classList="nps-bookend",e.appendChild(b),[...Array(10).keys()].forEach(a=>{const b=document.createElement("li");b.classList="micro-survey-option",b.textContent=a+1,b.dataset.eventCategory="NPS Survey",b.dataset.eventAction="submitted",b.dataset.eventValue=a+1,6>a?(b.dataset.eventLabel="detractor",b.dataset.npsValue=-1):8>a?(b.dataset.eventLabel="passive",b.dataset.npsValue=0):(b.dataset.eventLabel="promoter",b.dataset.npsValue=1),b.addEventListener("click",()=>{const a=b.dataset;ga("send","event",a.eventCategory,a.eventAction,a.eventLabel,a.eventValue,{dimension1:a.eventLabel,metric2:1,metric3:a.eventValue,metric4:a.npsValue})}),b.addEventListener("click",setSurveyedCookie),e.appendChild(b)});const c=document.createElement("li");c.textContent=a.getAttribute("data-micro-survey-very-likely-response-translated"),c.classList="nps-bookend",e.appendChild(c);break}case"pmf":{["micro-survey-very-disappointed-response","micro-survey-somewhat-disappointed-response","micro-survey-dont-care-response"].forEach(b=>{const c=document.createElement("li");c.classList="micro-survey-option",c.textContent=a.getAttribute(`data-${b}-translated`),c.dataset.eventCategory="PMF Survey",c.dataset.eventAction="submitted",c.dataset.eventLabel=a.getAttribute(`data-${b}-english`),c.addEventListener("click",setSurveyedCookie),c.addEventListener("click",()=>{const a=c.dataset;ga("send","event",a.eventCategory,a.eventAction,a.eventLabel,a.eventValue)}),e.appendChild(c)});break}case"usability":case"credibility":case"appearance":{let b="metric5",c="metric6";"credibility"===d&&(b="metric7",c="metric8"),"appearance"===d&&(b="metric9",c="metric10");let f=1;["micro-survey-strongly-disagree-response","micro-survey-disagree-response","micro-survey-unsure-response","micro-survey-agree-response","micro-survey-strongly-agree-response"].forEach(g=>{const h=document.createElement("li");h.classList="micro-survey-option",h.textContent=a.getAttribute(`data-${g}-translated`),h.dataset.eventCategory=`SUPR-Q Survey ${d}`,h.dataset.eventAction="submitted",h.dataset.eventLabel=a.getAttribute(`data-${g}-english`),h.dataset.eventValue=f,h.addEventListener("click",setSurveyedCookie),h.addEventListener("click",()=>{const a=h.dataset,d={[b]:1,[c]:a.eventValue};ga("send","event",a.eventCategory,a.eventAction,a.eventLabel,a.eventValue,d)}),f++,e.appendChild(h)});break}}}(()=>{const a=window,b=a.location.search;let c=a.location;_dntEnabled()||function(b,c,d,e,f,g,h){b.GoogleAnalyticsObject=f,b[f]=b[f]||function(){(b[f].q=b[f].q||[]).push(arguments)},b[f].l=1*new Date,g=c.createElement(d),h=c.getElementsByTagName(d)[0],g.async=1,g.src=e,h.parentNode.insertBefore(g,h)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),(b.includes("token=")||b.includes("hash="))&&(c=c.toString().replace(/[?&]token=[A-Za-z0-9_-]+/,"").replace(/&hash=[A-Za-z0-9_-]+/,""),a.history.replaceState({},"",c));const d="undefined"!=typeof ga,e=b.includes("utm_"),f=()=>{e&&a.history.replaceState({},"",c.toString().replace(/[?&]utm_.*/g,""))};e&&saveReferringPageData(new URL(c).searchParams);const g=new Event("gaInit");d?(ga("create","UA-77033033-16"),ga("set","anonymizeIp",!0),ga("set","dimension6",`${document.body.dataset.signedInUser}`),ga("send","pageview",{hitCallback:function(){f(),sessionStorage.removeItem("gaInit"),document.dispatchEvent(g)}}),document.addEventListener("gaInit",()=>{sessionStorage.getItem("gaInit")||setGAListeners()},!1),analyticsSurveyLogic()):f()})(),"use strict";function toggleMenu(a){a.stopPropagation();const b=document.querySelectorAll("button, a:not(.fxa-menu-link), input"),c=document.querySelectorAll(".fxa-menu-link"),d=document.body.classList;if(d.toggle("menu-open"),d.contains("menu-open")){const a=document.querySelector("firefox-apps");if(a._active){const b=new Event("close-bento-menu");a.dispatchEvent(b)}return document.addEventListener("bento-was-opened",toggleMenu),window.addEventListener("click",toggleMenu),b.forEach(a=>{a.tabIndex=-1}),void c.forEach(a=>{a.tabIndex=0})}b.forEach(a=>{a.tabIndex=0}),c.forEach(a=>{a.tabIndex=-1}),document.removeEventListener("bento-was-opened",toggleMenu),window.removeEventListener("click",toggleMenu)}const avatar=document.querySelector(".avatar-wrapper");if(avatar){avatar.addEventListener("click",toggleMenu);const a=document.querySelectorAll(".fxa-menu-link");avatar.addEventListener("focus",()=>{avatar.addEventListener("keydown",a=>[32,13].includes(a.keyCode)?(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(a)):27===a.keyCode&&document.body.classList.contains("menu-open")?toggleMenu(a):void 0)}),a.forEach(a=>{a.addEventListener("focus",()=>{a.addEventListener("keyup",a=>{27===a.keyCode&&(a.preventDefault(),a.stopImmediatePropagation(),toggleMenu(a))})})})}if("use strict","undefined"==typeof TextEncoder){const a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.src="/dist/edge.min.js",b.parentNode.insertBefore(a,b)}function findAncestor(a,b){for(;(a=a.parentElement)&&!a.classList.contains(b););return a}function toggleEl(a){const b=a.target,c=findAncestor(b,"toggle-parent");["inactive","active"].forEach(a=>{c.classList.toggle(a)})}function isValidEmail(a){return /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test((a+"").toLowerCase())}function getSubmittedEmail(){const a=document.querySelector("#scan-user-email input[type=email]").value;return!!isValidEmail(a)&&a}function overwriteLastScannedEmail(a,b){if(!sessionStorage)throw new Error("Session storage not available");sessionStorage.removeItem("lastScannedEmail"),sessionStorage.setItem("lastScannedEmail",a),b.value=sessionStorage.length}function doOauth(a,{emailWatch:b=!1}={}){let c=new URL("/oauth/init",document.body.dataset.serverUrl);if(c=getFxaUtms(c),["flowId","flowBeginTime","entrypoint","entrypoint_experiment","entrypoint_variation","form_type"].forEach(b=>{a.dataset[b]&&c.searchParams.append(b,encodeURIComponent(a.dataset[b]))}),!sessionStorage)return void window.location.assign(c);const d=sessionStorage.getItem("lastScannedEmail");if("boolean"!=typeof b)throw new Error("invalid argument option in doOauth");if(!b)return d&&c.searchParams.append("email",d),void window.location.assign(c);const e=getSubmittedEmail(),f=document.querySelector("#scan-user-email input[name=scannedEmailId]");return d===e?(c.searchParams.append("email",d),void window.location.assign(c)):void(overwriteLastScannedEmail(e,f),c.searchParams.append("email",e),window.location.assign(c))}function addFormListeners(){Array.from(document.forms).forEach(a=>{if(a.querySelector("input[type=email]")){const b=a.querySelector("input[type=email]");b.addEventListener("keydown",()=>{a.classList.remove("invalid")}),b.addEventListener("invalid",b=>{b.preventDefault(),a.classList.add("invalid")}),b.addEventListener("keydown",()=>{""===b.value&&sendPing(a,"Engage")}),b.addEventListener("focus",()=>{""===b.value&&sendPing(a,"Engage")})}a.addEventListener("submit",a=>handleFormSubmits(a),!0)})}function handleFormSubmits(a){a.preventDefault();const b=a.target;let c="";sendPing(b,"Submit",null,{transport:"beacon"}),b.email&&(c=b.email.value.trim(),b.email.value=c);const d=b.classList;return b.email&&!isValidEmail(c)?(sendPing(b,"Failure"),void d.add("invalid")):d.contains("email-scan")?void hashEmailAndSend(a):d.contains("loading-data")?void 0:(d.add("loading-data"),b.submit())}function restoreInputs(){Array.from(document.forms).forEach(a=>{a.classList.remove("loading-data"),a.classList.remove("invalid")}),document.querySelectorAll("input").forEach(a=>{a.disabled&&(a.disabled=!1)})}function toggleDropDownMenu(a){return a.classList.contains("mobile-menu-open")?a.classList.remove("mobile-menu-open"):a.classList.add("mobile-menu-open")}function toggleArticles(){const a=window.innerWidth,b=document.querySelectorAll(".st-toggle-wrapper, .relay-info.toggle-parent");return 600<a?void b.forEach(a=>{a.classList.add("active"),a.classList.remove("inactive")}):void b.forEach(a=>{a.classList.remove("active"),a.classList.add("inactive")})}function hideShowNavBars(a,b,c){a.onscroll=function(){return 600<a.innerWidth?void(b.classList=["show-nav-bars"]):100>a.pageYOffset?void(b.classList=["show-nav-bars"]):this.oldScroll<this.scrollY-50&&b.classList.contains("show-nav-bars")&&!c._active?(b.classList=["hide-nav-bars"],void(this.oldScroll=this.scrollY)):this.oldScroll>this.scrollY+50?(b.classList=["show-nav-bars"],void(this.oldScroll=this.scrollY)):void(this.oldScroll=this.scrollY)}}function toggleMobileFeatures(a){const b=window,c=b.innerWidth;if(800<c){const a=document.querySelectorAll(".breaches-dash.email-card:not(.zero-breaches)");return void a.forEach(a=>{a.classList.add("active")})}const d=document.querySelector("firefox-apps"),e=document.querySelectorAll(".breaches-dash.email-card.active");e.forEach(a=>{a.classList.remove("active")}),600>c&&(hideShowNavBars(b,a,d),addBentoObserver())}function toggleHeaderStates(a,b){600>b.outerWidth||(400<b.pageYOffset?a.classList.add("show-shadow"):a.classList.remove("show-shadow"))}function addMainNavListeners(){const a=document.querySelectorAll(".nav-link:not(.active-link)");a.forEach(a=>{a.classList.contains("active-link-underline")&&a.classList.remove("active-link-underline"),a.addEventListener("mouseenter",()=>{a.classList.add("active-link-underline")}),a.addEventListener("mouseleave",()=>{a.classList.remove("active-link-underline")})})}function addBentoObserver(){const a=document.body.classList,b=document.querySelector("firefox-apps"),c=function(c){for(const d of c)"attributes"===d.type&&a.toggle("bento-open",b._active)};if(b){const a=new MutationObserver(c);a.observe(b,{attributes:!0})}}function resizeDashboardMargin(){const a=document.querySelector("#dashboard.dashboard");if(a){a&&(a.style.paddingTop=`calc(${(()=>{const a=document.querySelector("header");return a.offsetHeight})()}px + 80px)`)}}function checkIfTier1(a){return["de","en","fr"].some(b=>a.includes(b))}function recruitmentLogic(){const a=document.querySelector("#recruitment-banner");if(a){const b=document.cookie.split("; ").some(a=>a.trim().startsWith("recruited="));return b?void a.parentElement.remove():void a.addEventListener("click",()=>{const a=new Date;a.setTime(a.getTime()+2592000000),document.cookie="recruited=true; expires="+a.toUTCString()})}}function addWaitlistSignupButtonListeners(){document.querySelectorAll(".relay-sign-up-btn").forEach(a=>{a.addEventListener("click",async()=>{const a=new URL("/join-waitlist",document.body.dataset.serverUrl),b=document.querySelector(".relay-sign-up");b.classList.add("sending-email");try{const c=await fetch(a,{headers:{"Content-Type":"application/json; charset=utf-8"},mode:"same-origin",method:"POST",body:JSON.stringify({emailToAdd:"add-user-email"})});c&&200===c.status&&setTimeout(()=>{b.classList.add("email-sent"),b.classList.remove("sending-email")},500)}catch(a){}})})}function addWaitlistObservers(){const a=document.querySelectorAll(".private-relay-cta");if(0===a.length)return;const b=("IntersectionObserver"in window),c=typeof ga!==void 0;if(b&&c){const b=a=>{"true"===a.userIsSignedUp||ga("send","event","Waitlist Test","View",a.analyticsLabel)},c=new IntersectionObserver((a,c)=>{a.forEach(a=>{a.isIntersecting&&(b(a.target.dataset),c.unobserve(a.target))})},{rootMargin:"-50px"});a.forEach(a=>{c.observe(a),a.addEventListener("click",b=>a.href?void("undefined"!=typeof ga&&(b.preventDefault(),ga("send","event","Waitlist Test","Engage",a.dataset.analyticsLabel,{hitCallback:window.location.href=a.href}))):void ga("send","event","Waitlist Test","Engage",a.dataset.analyticsLabel))})}}function vpnBannerLogic(a){const b=document.getElementById("vpnPromoBanner");if(!b)return;if(a&&a.isEnglish){const a=document.querySelector(".vpn-promo-copy");a.innerHTML="";const b=document.createElement("strong"),c=document.createElement("span"),d=document.createElement("small");b.textContent="Introductory offer ends soon: $4.99/month for Mozilla VPN",c.textContent="Now's the time to protect your device against hackers and prying eyes.",d.textContent="Offer only available in the United States, United Kingdom, Canada, New Zealand, Malaysia, and Singapore",a.appendChild(b),a.appendChild(c),a.appendChild(d);const e=document.querySelector(".vpn-promo-cta");e.href="https://www.mozilla.org/products/vpn/?utm_source=monitor&utm_medium=monitor&utm_campaign=intro-pricing"}const c=document.cookie.split("; ").some(a=>a.trim().startsWith("vpnBannerDismissed="));if(c)return;const d=document.getElementById("vpnPromoCloseButton"),e={hide:function(){e.setCookie(),b.classList.add("closed"),document.body.classList.remove("vpn-banner-visible")},init:function(){d.addEventListener("click",e.hide),e.show()},setCookie:function(){const a=new Date;a.setTime(a.getTime()+2592000000),document.cookie="vpnBannerDismissed=true; expires="+a.toUTCString()},show:function(){b.classList.remove("closed"),document.body.classList.add("vpn-banner-visible")}};e.init()}(async()=>{document.addEventListener("touchstart",function(){},!0);const a=window,b=document.getElementById("header"),c=document.querySelector("#navigation-wrapper");a.addEventListener("pageshow",function(){addMainNavListeners(),toggleMobileFeatures(c),toggleArticles(),toggleHeaderStates(b,a),document.forms?(restoreInputs(),addFormListeners()):null}),document.forms?(restoreInputs(),addFormListeners()):null;let d=a.outerWidth;a.addEventListener("resize",()=>{const b=a.outerWidth;b!==d&&(toggleMobileFeatures(c),toggleArticles(),d=b,resizeDashboardMargin())}),document.addEventListener("scroll",()=>toggleHeaderStates(b,a)),document.querySelectorAll(".breach-logo:not(.lazy-img)").forEach(a=>{a.addEventListener("error",a=>{a.target.src="/img/svg/placeholder.svg"})}),document.querySelectorAll(".toggle").forEach(a=>{a.addEventListener("click",toggleEl)}),document.querySelectorAll(".open-oauth").forEach(a=>{a.addEventListener("click",a=>doOauth(a.target))}),document.querySelectorAll("#see-additional-recs").forEach(a=>{a.addEventListener("click",()=>{a.classList.add("fade-out");const b=document.getElementById("overflow-recs");b.classList.remove("hide"),"undefined"!=typeof ga&&(ga("send","event","Breach Details: See Additional Recommendations","Click","See Additional Recommendations"),sendRecommendationPings(".overflow-rec-cta"))})}),resizeDashboardMargin(),recruitmentLogic(),addWaitlistSignupButtonListeners(),addWaitlistObservers();const e=document.querySelector(".mobile-nav.show-mobile");e.addEventListener("click",()=>toggleDropDownMenu(e));const f=navigator.languages,g=checkIfTier1(f[0]);if(!g)return;["de","fr"].some(a=>f[0].includes(a))&&vpnBannerLogic(),["en"].some(a=>f[0].includes(a))&&vpnBannerLogic({isEnglish:!0}),document.getElementById("fxaCheckbox")&&(document.getElementById("fxaCheckbox").style.display="block");const h=document.getElementById("createFxaCheckbox"),i=document.querySelector(".breachesSubmitButton");i&&i.addEventListener("click",a=>{const b=document.getElementById("scan-user-email"),c=document.querySelector("#scan-user-email input[type='email']").value;return 1>c.length||!isValidEmail(c)?void b.classList.add("invalid"):h.checked?(a.preventDefault(),"undefined"!=typeof ga&&ga("send",{hitType:"event",eventCategory:"Sign Up Button",eventAction:"Engage",eventLabel:"fx-monitor-homepage-fxa-checkbox",options:{transport:"beacon"}}),void doOauth(a.target,{emailWatch:!0})):void 0})})(),"use strict",(()=>{function a(a,b=!0){const c=["button","input","[href]","[tabindex]"],d=document.querySelectorAll(c),e=a.querySelectorAll(c);let f=0,g=-1;b&&(f=-1,g=0);const h=(a,b)=>{a.forEach(a=>{a.tabIndex=b})};return h(d,f),void h(e,g)}function b(a,b,c){if("undefined"!=typeof ga){let d={};"Engage"!==b&&(d={nonInteraction:!0}),ga("send","event",a,b,c,d)}}const c=document.querySelectorAll(".resolve-button, a.what-to-do-next"),d=document.querySelectorAll(".product-promo-wrapper"),e=[...d,...c],f=("IntersectionObserver"in window),g=typeof ga!==void 0,h="Breach Resolution";if(f&&e&&g){const a=new IntersectionObserver((a,c)=>{a.forEach(a=>{if(a.isIntersecting){const d=a.target.dataset,e=d.analyticsLabel;return a.target.classList.contains("product-promo-wrapper")?(b(d.eventCategory,"View",e),void c.unobserve(a.target)):(b(h,"View",e),void c.unobserve(a.target))}})},{rootMargin:"0px"});e.forEach(b=>{a.observe(b)})}!f&&e&&g&&e.forEach(a=>{const c=a.dataset;return a.classList.contains("product-promo-wrappper")?b(c.eventCategory,"View - No IntersectionObserver",c.analyticsLabel):void b(h,"View - No IntersectionObserver",c.analyticsLabel)}),d.forEach(a=>{a.addEventListener("click",c=>{const d=a.dataset;b(d.eventCategory,"Engage",d.analyticsLabel),a.classList.contains("open-oauth")&&(c.preventDefault(),doOauth(a))})}),c.forEach(c=>{c.addEventListener("click",async d=>{if(g&&b(h,"Engage",c.dataset.analyticsLabel),"what-to-do-next"===c.dataset.analyticsLabel){d.preventDefault();const a=document.getElementById("what-to-do-next");return window.scrollTo(0,a.offsetTop-100)}c.classList.add("loading");const e=document.querySelector(".breach-resolution-modal");e.classList.add("modal-loading"),a(e,!0);const f=JSON.stringify(c.dataset);try{const a=await fetch("/user/resolve-breach",{headers:{"Content-Type":"application/json"},mode:"same-origin",method:"POST",body:f});if(a&&!0===a.redirected)return window.location.reload(!0);if(a){const{headline:b,headlineClassName:c,progressMessage:d,progressStatus:f}=await a.json();e.classList.add("modal-open");const g=e.querySelector(".go-to-dash");g.focus();const h=e.querySelectorAll(".close-modal");h.forEach(a=>{a.addEventListener("click",()=>window.location.reload())});const i=document.getElementById("confirmation-headline");i.textContent=b,i.classList.add(c);const j=document.getElementById("confirmation-progress-message");j.textContent=d;const k=document.getElementById("modal-progress-status");k.textContent=f}}catch(a){}})})})(),"use strict";async function sha1(a){a=a.toLowerCase();const b=new TextEncoder("utf-8").encode(a);let c=/edge/i.test(navigator.userAgent)?libpolycrypt.sha1(b):await crypto.subtle.digest("SHA-1",b);const d=Array.from(new Uint8Array(c)),e=d.map(a=>("00"+a.toString(16)).slice(-2)).join("");return e.toUpperCase()}async function hashEmailAndSend(a){a.preventDefault();const b=a.target,c=document.getElementById("scan-email"),d=c.value;if(b.classList.add("loading-data"),b.querySelector("input[name=emailHash]").value=await sha1(d),sessionStorage){const a=sessionStorage.getItem("lastScannedEmail");a&&a===d||(sessionStorage.removeItem("lastScannedEmail"),sessionStorage.setItem("lastScannedEmail",d),b.querySelector("input[name=scannedEmailId]").value=sessionStorage.length)}c.value="",sendPing(b,"Success",null,{transport:"beacon"}),b.submit()}"use strict",(()=>{if(document.getElementById("scannedEmail")){const a=document.getElementById("scannedEmail");a.textContent=sessionStorage.getItem("lastScannedEmail")}})();